<?php 
    $id = $post->ID;
    $fields = null;

    if($id){
        $fields = get_fields($id);
    }

    if(empty($fields)): die();
    endif;

    $fields = get_fields($id);

    $title = array_key_exists('kinder_workers_title', $fields) ? $fields['kinder_workers_title'] : null;
    $photo_id = array_key_exists('kinder_workers_fotografiya', $fields) ? $fields['kinder_workers_fotografiya'] : null;
    $name = array_key_exists('kinder_workers_name', $fields) ? $fields['kinder_workers_name'] : null;
    $short_text = array_key_exists('kinder_workers_short_text', $fields) ? $fields['kinder_workers_short_text'] : null;
?>

<!-- START OF CARD -->
<div class="workers__card">
    <div class="workers__card-image">
        <div class="workers__card-image-wrapper">
            <?php 
                $photo_url = null;
                $photo_alt = null;
                if($photo_id){

                    $photo_url = wp_get_attachment_image_src($photo_id, 'greetings_portrait')[0];
                    $photo_alt = get_post_meta($photo_id, '_wp_attachment_image_alt', TRUE);
                }
                ?>
            <img src="<?php echo ($photo_url && $photo_url !== '') ? $photo_url : esc_url( get_template_directory_uri() . WORKERS_DEFAULT);?>"
             alt="<?php echo ($photo_alt && $photo_alt !== '') ? $photo_alt  : __("Изображение работника", "kinder");?>" role="presentation">
            <p class="workers__card-name"><?php echo $name ? $name : __("Имя не указано", "kinder"); ?></p>
        </div>
    </div>
    <div class="workers__card-text">
        <h3 class="workers__card-title"><?php echo $title ? $title : __("Сотрудник детского сада", "kinder");?></h3>
        <p>
            <?php echo $short_text && $short_text !== '' ? $short_text : __("Больше информации на странице", "kinder"); ?>
        </p>
    </div>
    <div class="workers__icon">
        <a href="<?php the_permalink(); ?>">
            <svg width="24" height="23" viewBox="0 0 24 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23.7102 12.2899C20.6007 9.19143 16.3899 7.45166 12.0002 7.45166C7.61048 7.45166 3.3997 9.19143 0.290185 12.2899C0.101882 12.4782 -0.00390625 12.7336 -0.00390625 12.9999C-0.00390625 13.2662 0.101882 13.5216 0.290185 13.7099C0.478489 13.8982 0.733884 14.004 1.00019 14.004C1.26649 14.004 1.52188 13.8982 1.71019 13.7099C4.44027 10.9827 8.14132 9.45084 12.0002 9.45084C15.8591 9.45084 19.5601 10.9827 22.2902 13.7099C22.3831 13.8036 22.4937 13.878 22.6156 13.9288C22.7375 13.9796 22.8682 14.0057 23.0002 14.0057C23.1322 14.0057 23.2629 13.9796 23.3848 13.9288C23.5066 13.878 23.6172 13.8036 23.7102 13.7099C23.8039 13.6169 23.8783 13.5063 23.9291 13.3845C23.9798 13.2626 24.006 13.1319 24.006 12.9999C24.006 12.8679 23.9798 12.7372 23.9291 12.6153C23.8783 12.4935 23.8039 12.3829 23.7102 12.2899ZM20.0002 18.1699C16.7746 20.2795 12.8479 21.0339 9.07018 20.2699C8.80497 20.2169 8.52954 20.2713 8.3045 20.4214C8.07946 20.5714 7.92323 20.8047 7.87019 21.0699C7.81714 21.3351 7.87163 21.6105 8.02166 21.8356C8.17169 22.0606 8.40497 22.2169 8.67019 22.2699C12.9679 23.1388 17.4349 22.2763 21.1002 19.8699C21.3256 19.724 21.4839 19.4946 21.5401 19.232C21.5964 18.9695 21.5461 18.6953 21.4002 18.4699C21.2543 18.2445 21.0249 18.0862 20.7623 18.0299C20.4998 17.9737 20.2256 18.024 20.0002 18.1699ZM5.66019 19.1199C5.0887 18.8361 4.53441 18.5188 4.00019 18.1699C3.78062 18.0521 3.52499 18.0205 3.28337 18.0814C3.04174 18.1422 2.83153 18.291 2.6939 18.4987C2.55626 18.7064 2.50113 18.958 2.53929 19.2043C2.57744 19.4505 2.70614 19.6736 2.90019 19.8299C3.50734 20.2371 4.14222 20.6013 4.80019 20.9199C4.93355 20.9869 5.08095 21.0212 5.23019 21.0199C5.45603 21.0186 5.67478 20.9408 5.85082 20.7993C6.02686 20.6578 6.14981 20.4609 6.19967 20.2406C6.24952 20.0204 6.22333 19.7897 6.12538 19.5862C6.02742 19.3827 5.86346 19.2183 5.66019 19.1199Z" fill="currentColor"/>
                <path d="M12 19C12.7911 19 13.5644 18.7654 14.2222 18.3259C14.88 17.8864 15.3927 17.2616 15.6955 16.5307C15.9982 15.7998 16.0774 14.9956 15.9231 14.2196C15.7688 13.4437 15.3878 12.731 14.8284 12.1716C14.269 11.6122 13.5562 11.2312 12.7803 11.0769C12.0044 10.9225 11.2001 11.0017 10.4692 11.3045C9.73832 11.6072 9.1136 12.1199 8.67408 12.7777C8.23455 13.4355 7.99996 14.2089 7.99996 15C7.99996 16.0609 8.42138 17.0783 9.17153 17.8284C9.92167 18.5786 10.9391 19 12 19ZM12 13C12.3955 13 12.7822 13.1173 13.1111 13.3371C13.44 13.5568 13.6963 13.8692 13.8477 14.2346C13.9991 14.6001 14.0387 15.0022 13.9615 15.3902C13.8844 15.7781 13.6939 16.1345 13.4142 16.4142C13.1345 16.6939 12.7781 16.8844 12.3901 16.9616C12.0022 17.0387 11.6 16.9991 11.2346 16.8478C10.8691 16.6964 10.5568 16.44 10.337 16.1111C10.1173 15.7822 9.99996 15.3956 9.99996 15C9.99996 14.4696 10.2107 13.9609 10.5857 13.5858C10.9608 13.2107 11.4695 13 12 13ZM12 5C12.2652 5 12.5195 4.89464 12.7071 4.70711C12.8946 4.51957 13 4.26522 13 4V1C13 0.734784 12.8946 0.48043 12.7071 0.292893C12.5195 0.105357 12.2652 0 12 0C11.7347 0 11.4804 0.105357 11.2928 0.292893C11.1053 0.48043 11 0.734784 11 1V4C11 4.26522 11.1053 4.51957 11.2928 4.70711C11.4804 4.89464 11.7347 5 12 5ZM17 6C17.1647 5.99915 17.3266 5.95763 17.4714 5.87912C17.6162 5.80062 17.7394 5.68756 17.83 5.55L19.83 2.55C19.9172 2.44164 19.9809 2.31626 20.017 2.18187C20.0531 2.04749 20.0607 1.90705 20.0394 1.76955C20.0181 1.63206 19.9683 1.50052 19.8933 1.38335C19.8182 1.26618 19.7195 1.16596 19.6036 1.0891C19.4876 1.01225 19.3568 0.960437 19.2197 0.936993C19.0825 0.913549 18.942 0.918984 18.8071 0.952952C18.6721 0.986919 18.5458 1.04867 18.4361 1.13426C18.3264 1.21985 18.2357 1.32739 18.17 1.45L16.17 4.45C16.0252 4.67046 15.9734 4.93918 16.0259 5.19764C16.0783 5.4561 16.2307 5.68338 16.45 5.83C16.611 5.94279 16.8034 6.00225 17 6ZM6.16996 5.55C6.26054 5.68756 6.38371 5.80062 6.52851 5.87912C6.6733 5.95763 6.83525 5.99915 6.99996 6C7.19656 6.00225 7.38891 5.94279 7.54996 5.83C7.76917 5.68338 7.92159 5.4561 7.97403 5.19764C8.02647 4.93918 7.97469 4.67046 7.82996 4.45L5.82996 1.45C5.76418 1.32739 5.67355 1.21985 5.56385 1.13426C5.45414 1.04867 5.32778 0.986919 5.19285 0.952952C5.05792 0.918984 4.91739 0.913549 4.78024 0.936993C4.64309 0.960437 4.51234 1.01225 4.39635 1.0891C4.28036 1.16596 4.18169 1.26618 4.10665 1.38335C4.0316 1.50052 3.98183 1.63206 3.96053 1.76955C3.93922 1.90705 3.94684 2.04749 3.9829 2.18187C4.01896 2.31626 4.08267 2.44164 4.16996 2.55L6.16996 5.55Z" fill="currentColor"/>
            </svg>
            <span>Перейти</span>
        </a>
    </div>
</div>
<!-- END OF CARD -->